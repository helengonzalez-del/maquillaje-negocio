<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Registrar Kit</title>

<style>
    body {font-family: Arial; background:#F3F4F6; padding:20px;}
    .card {
        max-width:450px;margin:auto;background:white;padding:22px;
        border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.1);
    }
    h1 {text-align:center;color:#EC4899;}
    label {font-weight:bold;color:#374151;}
    input,select,button {
        width:100%;padding:12px;margin-top:6px;
        border-radius:8px;border:1px solid #D1D5DB;font-size:15px;
    }
    button {background:#EC4899;color:white;border:none;margin-top:18px;}
    button:hover {background:#BE185D;}
</style>
</head>

<body>

<div class="card">
<h1>Registrar Kit</h1>

<form id="kitForm">

    <label>Nombre del Kit:</label>
    <input id="nombre_kit" required>

    <label>Precio de Compra:</label>
    <input type="number" id="precio_compra" step="0.01" required>

    <label>Precio de Venta:</label>
    <input type="number" id="precio_venta" step="0.01" required>

    <label>Cantidad Comprada:</label>
    <input type="number" id="cantidad_comprada" required>

    <label>Fecha de Compra:</label>
    <input type="date" id="fecha_compra" required>

    <label>¿Está vendido?</label>
    <select id="vendido">
        <option value="no">No</option>
        <option value="si">Sí</option>
    </select>

    <label>Fecha de Venta (si aplica):</label>
    <input type="date" id="fecha_venta">

    <button type="submit">Registrar</button>
</form>
</div>

<script src="config.js"></script>

<script>
const URL = SUPABASE_URL + "/rest/v1/kits_maquillaje";
const API_KEY = SUPABASE_KEY;

document.getElementById("kitForm").addEventListener("submit", async(e)=>{
    e.preventDefault();

    const data = {
        nombre_kit: nombre_kit.value,
        precio_compra: parseFloat(precio_compra.value),
        precio_venta: parseFloat(precio_venta.value),
        cantidad_comprada: parseInt(cantidad_comprada.value),
        fecha_compra: fecha_compra.value,
        vendido: vendido.value === "si",
        fecha_venta: fecha_venta.value || null
    };

    const resp = await fetch(URL,{
        method:"POST",
        headers:{
            "Content-Type":"application/json",
            "apikey":API_KEY,
            "Authorization":"Bearer "+API_KEY
        },
        body:JSON.stringify(data)
    });

    alert(resp.ok ? "Kit registrado" : "Error al registrar");
    if(resp.ok) e.target.reset();
});
</script>

</body>
</html>

